{"version":3,"sources":["webpack:///./src/components/Copybook.js","webpack:///./src/components/Loading.js","webpack:///./src/components/hooks/useCodeHighlighting.js","webpack:///./src/containers/CopybookContainer.js"],"names":["Copybook","props","codeEl","useCodeHighlighting","copybookFileContent","copybookVisible","editorEl","useRef","handleClose","onCloseCopybook","handleDropdownChange","e","searchQuery","value","copybookSelectedFile","path","onRequestCopybookFile","copybookFileList","find","f","renderDropdownItem","map","file","idx","key","text","className","link","copybookRequesting","content","Loading","watchedProps","keyword","container","mark","useEffect","renderPrettyPrint","setTimeout","current","classList","remove","PR","prettyPrint","renderHighLight","unmark","Mark","each","el","setAttribute","actionTypes","UPDATE","initState","CopybookModel","visible","fileList","selectedFile","fileContent","reducer","state","action","type","payload","CopybookContainer","useReducer","dispatch","onUpdated","handleCopybookModelUpdate","offUpdated","setState","curr","prev","mutation","AppModel","analytics","handleCloseCopybook","update","handleRequestCopybookFile","requestRepoFile"],"mappings":"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","file":"5.app.js","sourcesContent":["import React, { useRef } from 'react';\nimport { Button, Dropdown, Modal } from 'semantic-ui-react';\nimport Loading from \"./Loading\";\nimport useCodeHighlighting from './hooks/useCodeHighlighting';\n\nexport default function Copybook(props) {\n  const codeEl = useCodeHighlighting([props.copybookFileContent, props.copybookVisible]);\n  const editorEl = useRef(null);\n\n  function handleClose() {\n    props.onCloseCopybook();\n  }\n\n  function handleDropdownChange(e, { searchQuery, value }) {\n    if (value != props.copybookSelectedFile.path) {\n      props.onRequestCopybookFile(\n        props.copybookFileList.find(f => f.path === value)\n      );\n    }\n  }\n\n  function renderDropdownItem() {\n    if (!props.copybookFileList) {\n      return null;\n    }\n    return props.copybookFileList.map((file, idx) => {\n      return {\n        key: file.path,\n        value: file.path,\n        text: (idx + 1) + '. ' + file.path\n      }\n    });\n  }\n\n  if (!props.copybookVisible || !props.copybookFileList || !props.copybookFileContent) {\n    return (\n      <Modal open={props.copybookVisible} onClose={handleClose}\n        centered={false} closeIcon className={props.className} size='large'>\n        <Modal.Header>\n          <div className='title'>Daily Algorithm Copybook</div>\n        </Modal.Header>\n        <Modal.Content>\n          <Loading />\n          <pre><code className='prettyprint' ref={codeEl}></code></pre>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n\n  return (\n    <Modal open={props.copybookVisible} onClose={handleClose}\n      centered={false} closeIcon className={props.className} size='large'>\n      <Modal.Header>\n        <div className='title'>Daily Algorithm Copybook</div>\n        <Button size='tiny' as='a' basic\n          href={props.copybookSelectedFile.link}\n          target='_blank'>View In GitHub</Button>\n        <Dropdown\n          search\n          selection\n          onChange={handleDropdownChange}\n          value={props.copybookSelectedFile.path}\n          options={renderDropdownItem()} />\n      </Modal.Header>\n      <Modal.Content>\n        {props.copybookRequesting ? <Loading /> : ''}\n        <pre>\n          <code className='prettyprint' ref={codeEl}>{props.copybookFileContent.content}</code>\n          <div className='editor' contentEditable={true} ref={editorEl}></div>\n        </pre>\n      </Modal.Content>\n    </Modal>\n  )\n}\n","import React from 'react';\n\nexport default function Loading() {\n  return (\n    <div className='loading'>\n      <div className='logo'><img className='spinner' src='images/codelf_logo.png' /></div>\n    </div>\n  )\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function useCodeHighlighting(watchedProps, keyword) {\n  const container = useRef(null);\n  const mark = useRef(null);\n  useEffect(() => {\n    renderPrettyPrint();\n  }, [...watchedProps]);\n\n  function renderPrettyPrint() {\n    setTimeout(() => {\n      if (container.current) {\n        container.current.classList.remove('prettyprinted');\n        setTimeout(() => PR.prettyPrint(\n          () => setTimeout(() => renderHighLight(), 1000)\n        ), 100);\n      }\n    }, container.current ? 0 : 1000);\n  }\n\n  function renderHighLight() {\n    if (!keyword) {\n      return;\n    }\n    if (mark.current) {\n      mark.current.unmark()\n    }\n    mark.current = new Mark(container.current);\n    let idx = 0;\n    mark.current.mark(keyword, {\n      each: el => {\n        el.setAttribute('tabindex', idx++);\n      }\n    });\n  }\n\n  return container;\n}\n","import React, { useEffect, useReducer } from 'react';\nimport AppModel from '../models/AppModel';\nimport CopybookModel from '../models/CopybookModel';\nimport Copybook from '../components/Copybook';\n\nconst actionTypes = {\n  UPDATE: 'update',\n};\n\nconst initState = {\n  copybookRequesting: false,\n  copybookVisible: CopybookModel.visible,\n  copybookFileList: CopybookModel.fileList,\n  copybookSelectedFile: CopybookModel.selectedFile,\n  copybookFileContent: CopybookModel.fileContent,\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case actionTypes.UPDATE:\n      return {\n        ...state,\n        ...action.payload\n      };\n    default:\n      return state;\n  }\n}\n\nexport default function CopybookContainer(props) {\n  const [state, dispatch] = useReducer(reducer, initState);\n\n  useEffect(() => {\n    CopybookModel.onUpdated(handleCopybookModelUpdate);\n    return () => CopybookModel.offUpdated(handleCopybookModelUpdate);\n  });\n\n  function setState(payload) {\n    dispatch({ type: actionTypes.UPDATE, payload: payload });\n  }\n\n  function handleCopybookModelUpdate(curr, prev, mutation) {\n    if (mutation.fileList) {\n      setState({\n        copybookFileList: CopybookModel.fileList\n      });\n    }\n    if (mutation.fileContent) {\n      setState({\n        copybookRequesting: false,\n        copybookSelectedFile: CopybookModel.selectedFile,\n        copybookFileContent: CopybookModel.fileContent,\n      });\n    }\n    if (mutation.visible) {\n      setState({\n        copybookVisible: CopybookModel.visible,\n      });\n      if (CopybookModel.visible) {\n        AppModel.analytics('copybook&q=read');\n      }\n    }\n  }\n\n  function handleCloseCopybook() {\n    CopybookModel.update({ visible: false });\n  }\n\n  function handleRequestCopybookFile(file) {\n    setState({ copybookRequesting: true });\n    CopybookModel.requestRepoFile(file);\n    AppModel.analytics('copybook&q=read');\n  }\n\n  return <Copybook {...state}\n    className='copybook-container fix-modal'\n    onRequestCopybookFile={handleRequestCopybookFile}\n    onCloseCopybook={handleCloseCopybook} />;\n}\n"],"sourceRoot":""}